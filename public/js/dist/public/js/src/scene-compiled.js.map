{"version":3,"file":"scene-compiled.js","names":["window","onload","Detector","webgl","ua","navigator","userAgent","is_ie","indexOf","document","getElementById","innerHTML","theScene","Scene","warning","getWebGLErrorMessage","console","log","_classCallCheck","mythis","stop_on_next","hide_controls","container","loadingdiv","playdiv","scene","THREE","renderer","WebGLRenderer","antialias","alpha","camera","PerspectiveCamera","innerWidth","innerHeight","cameralookat","Vector3","shadowMap","enabled","setSize","appendChild","domElement","audiolistener","AudioListener","add","app_preloaded","fps","animationstart","now","then","Date","interval","delta","frame","currentsong","gui","SceneGui","stats","Stats","showPanel","style","position","bottom","zIndex","addEventListener","e","preventDefault","stopplay","display","preloaded","updateStopPlayButtonState","initScene","_createClass","key","value","stage","orbitcontrols","OrbitControls","set","lookAt","onWindowResize","aspect","updateProjectionMatrix","directionalLight","DirectionalLight","rotation","geometry","PlaneGeometry","material","MeshStandardMaterial","color","side","DoubleSide","transparent","opacity","floor","Mesh","Math","PI","loadJSON","response","playlist","JSON","parse","songs","location","songcount","length","songi","i","Song","onLoaded","loaded","j","visibility","setTimeout","init","initAnimate","play","which","title","mp3file","substring","updateSongTitle","paused","requestAnimationFrame","animate","stop","fastforward","nextsong","render","updateScene","update","round","updateAnimation","file","callback","xobj","XMLHttpRequest","overrideMimeType","open","onreadystatechange","readyState","status","responseText","send"],"sources":["../../../../src/scene.js"],"sourcesContent":["(() => {\n\n  //Detect and start game\n  window.onload = () => {\n    if(Detector.webgl){\n      var ua = navigator.userAgent;\n      //console.log('ua', ua);\n      var is_ie = ua.indexOf(\"MSIE \") > -1 || ua.indexOf(\"Trident/\") > -1;\n      if(is_ie){\n        document.getElementById('loading').innerHTML = 'Please use a different browser. This site works best in Chrome.';\n      }else{\n        const theScene = new Scene();\n      }\n    }else{\n      const warning = Detector.getWebGLErrorMessage();\n      console.log('webgl warning', warning);\n      document.getElementById('loading').innerHTML = 'This browser does not support WebGL';\n    }\n  }\n\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  //GAME INIT////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n  class Scene {\n    constructor() {\n      const mythis = this;\n\n      //Backend connection\n      /*this.socket = io.connect('http://localhost:3000');*/\n      this.export = false; //Not really working\n      this.stop_on_next = false;\n      this.hide_controls = true;\n\n      //Scene variables\n      this.container = document.getElementById('container');\n      this.loadingdiv = document.getElementById('loading');\n      this.playdiv = document.getElementById('playdiv');\n      this.scene = new THREE.Scene();\n      this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n      this.camera = new THREE.PerspectiveCamera(10, window.innerWidth / window.innerHeight, 0.1, 10000);\n      this.cameralookat = new THREE.Vector3(0, 1.2, 0);\n      this.renderer.shadowMap.enabled = true;\n      this.renderer.setSize(window.innerWidth, window.innerHeight);\n      this.container.appendChild(this.renderer.domElement);\n      this.audiolistener = new THREE.AudioListener();\n      this.camera.add(this.audiolistener);\n\n      //Variables\n      this.app_preloaded = false;\n      this.fps = 24;\n      this.animationstart = 0;\n      this.now;\n      this.then = Date.now();\n      this.interval = 1000/this.fps;\n      this.delta;\n      this.frame = 0;\n      this.currentsong = 0;\n\n      this.gui = new SceneGui(this);\n      //if(this.hide_controls) this.gui.updateVisibility(false);\n\n      //Stats\n      this.stats = new Stats();\n      this.stats.showPanel( 1 ); // 0: fps, 1: ms, 2: mb, 3+: custom\n      this.stats.domElement.style.position = 'absolute';\n      this.stats.domElement.style.bottom = '0px';\n      this.stats.domElement.style.zIndex = 100;\n      if(!this.hide_controls) this.container.appendChild( this.stats.domElement );\n\n      //Controls\n      document.getElementById('game-stop').addEventListener('click', e => {\n        e.preventDefault();\n        mythis.stopplay();\n      });\n\n      document.getElementById('playdiv-begin').addEventListener('click', e => {\n        e.preventDefault();\n        mythis.playdiv.style.display = 'none';\n        if(!mythis.app_preloaded){\n          mythis.preloaded();\n        }else{\n          mythis.stopplay();\n          mythis.gui.updateStopPlayButtonState(false);\n        }\n      });\n\n      //Initialize\n      this.initScene();\n    }\n\n    initScene(stage) {\n      const mythis = this;\n\n      ////////////////////////////////////////////////////////////////////////////\n      //SCENE/////////////////////////////////////////////////////////////////////\n      ////////////////////////////////////////////////////////////////////////////\n\n      // CONTROLS\n      this.orbitcontrols = new THREE.OrbitControls(this.camera, this.renderer.domElement);\n\n      //Camera\n      this.camera.position.set(0, -10, 22); //-15, 10, 20 | 0, 3, 20 | -10, 5, 10\n      this.camera.lookAt(this.cameralookat);\n      window.addEventListener('resize', onWindowResize, false);\n      function onWindowResize(){\n          mythis.camera.aspect = window.innerWidth / window.innerHeight;\n          mythis.camera.updateProjectionMatrix();\n          mythis.renderer.setSize( window.innerWidth, window.innerHeight );\n      }\n\n      //LIGHT\n      /*var light = new THREE.PointLight( 0xffffff, 1);\n      light.position.set(0, 1, 3);\n      this.scene.add( light );\n      var pointLightHelper = new THREE.PointLightHelper(light, 0.1);\n      this.scene.add( pointLightHelper );*/\n\n      //LIGHT\n      const directionalLight = new THREE.DirectionalLight( 0xffffff, 0.5 );\n      directionalLight.rotation.set(0, 0, 0);\n      directionalLight.position.set(0,0,5);\n      this.scene.add( directionalLight );\n      //var helper = new THREE.DirectionalLightHelper( directionalLight, 1 );\n      //this.scene.add( helper );\n\n      //Sky Fog\n      /*const skyBoxGeometry = new THREE.CubeGeometry( 20, 20, 20);\n      const skyBoxMaterial = new THREE.MeshBasicMaterial( { color: 0x000000, side: THREE.BackSide } );\n      const skyBox = new THREE.Mesh( skyBoxGeometry, skyBoxMaterial );\n      skyBox.name = 'skybox';\n      this.scene.add(skyBox);*/\n\n      //Floor\n      let geometry = new THREE.PlaneGeometry( 2, 4 );\n      let material = new THREE.MeshStandardMaterial( {color: 0xffffff, side: THREE.DoubleSide, transparent:true, opacity:0.2} );\n      this.floor = new THREE.Mesh( geometry, material );\n      this.floor.position.set(0, 0, 0);\n      this.floor.rotation.set(Math.PI / 2, 0, 0);\n      this.scene.add( this.floor );\n\n      ////////////////////////////////////////////////////////////////////////////\n      //PLAYLIST//////////////////////////////////////////////////////////////////\n      ////////////////////////////////////////////////////////////////////////////\n\n      //Load playlist json\n      this.loadJSON('content/_playlist.json', response => {\n        mythis.playlist = JSON.parse(response);\n        //console.log('playlist', mythis.playlist);\n\n        //Songs\n        mythis.songs = [];\n        let location = '';\n\n        //Foreach Song, load hidden\n        let songcount = mythis.playlist.songs.length;\n        let songi = 0;\n        //songcount = 1;\n        for(let i=0; i<songcount; i++){\n          location = 'content/'+mythis.playlist.songs[i]+'/';\n          mythis.songs[i] = new Song(mythis, location, '_analysis_files.json', '_config.json', mythis.scene, mythis.audiolistener, mythis.fps, mythis.hide_controls);\n          mythis.songs[i].onLoaded = () => {\n            //console.log(mythis.songs[i]);\n            songi++;\n            mythis.loadingdiv.innerHTML = '<img src=\"img/loading-icon.gif\" width=\"30\" /><br>Loading Interactive Experience<br>Song '+songi+' of '+songcount+' loaded';\n\n            //Detect when all loaded\n            let loaded = true;\n            for(let j=0; j<songcount; j++){\n              if(!mythis.songs[j].loaded){\n                loaded = false;\n              }\n            }\n            if(loaded){\n              mythis.loadingdiv.style.visibility = 'hidden';\n              mythis.playdiv.style.display = 'block';\n            }\n          };\n        }\n      });\n\n    }\n\n    preloaded(){\n      var mythis = this;\n      this.app_preloaded = true;\n      this.loadingdiv.style.visibility = 'hidden';\n      setTimeout(function(){\n        //console.log('preloaded');\n        mythis.gui.init();\n        mythis.initAnimate();\n        mythis.play(mythis.currentsong);\n      }, 1000);\n    }\n\n    //////////////////////////////////////////////////////////////////////////////\n    //PLAYBACK////////////////////////////////////////////////////////////////////\n    //////////////////////////////////////////////////////////////////////////////\n    play(which){\n      if(which) this.currentsong = which;\n      this.songs[this.currentsong].play(0);\n      var title = '\"' + this.songs[this.currentsong].mp3file.substring(0, this.songs[this.currentsong].mp3file.length - 4) + '\"';\n      this.gui.updateSongTitle(title);\n    }\n\n    stopplay(){\n      var mythis = this;\n      if(this.paused){\n        this.songs[this.currentsong].play();\n        this.playdiv.style.display = 'none';\n        this.paused = false;\n        requestAnimationFrame(() => { mythis.animate(); });\n      }else{\n        this.songs[this.currentsong].stop();\n        this.playdiv.style.display = 'block';\n        this.paused = true;\n      }\n    }\n\n    fastforward(){\n      this.paused = false;\n      this.songs[this.currentsong].fastforward();\n    }\n\n    nextsong(){\n      this.paused = false;\n      if(this.stop_on_next){\n        this.stopplay();\n      }else{\n        var mythis = this;\n        this.songs[this.currentsong].stop();\n        setTimeout(function(){\n          mythis.currentsong++;\n          if(mythis.currentsong == mythis.playlist.songs.length) mythis.currentsong = 0;\n          mythis.play();\n        }, 0);\n      }\n    }\n\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    //ANIMATE//////////////////////////////////////////////////////////////////////////////////////////////////////\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n    initAnimate() {\n      const mythis = this;\n      this.paused = false;\n      this.frame = 0;\n      this.animationstart = Date.now();\n\n      this.renderer.render(this.scene, this.camera);\n      requestAnimationFrame(() => {\n        mythis.animate();\n      });\n    }\n\n    animate() {\n      const mythis = this;\n      //if(!this.paused){ requestAnimationFrame(() => { mythis.animate(); }); };\n      requestAnimationFrame(() => { mythis.animate(); });\n\n      //Frame quantization\n      this.now = Date.now();\n      this.delta = this.now - this.then;\n      if(this.delta > this.interval){\n\n        //Update scene\n        this.updateScene();\n\n        //Turnaround\n        this.then = this.now - (this.delta % this.interval);\n        this.renderer.render(this.scene, this.camera);\n        if(this.export){\n          //this.socket.emit('render-frame', {frame: mythis.frame, file: document.querySelector('canvas').toDataURL()});\n        }\n        this.stats.update();\n        this.frame = Math.round((this.now - this.animationstart) / 41.666666666); //1000ms / 24fps = 41.666666666\n      }\n    }\n\n    updateScene() {\n      this.songs[this.currentsong].updateAnimation();\n      this.camera.lookAt(this.cameralookat);\n    }\n\n    loadJSON(file, callback) {\n      const xobj = new XMLHttpRequest();\n      xobj.overrideMimeType(\"application/json\");\n      xobj.open('GET', file, true);\n      xobj.onreadystatechange = () => {\n        if(xobj.readyState == 4 && xobj.status == \"200\") {callback(xobj.responseText);}\n      };\n      xobj.send(null);\n    }\n  }\n})();\n\n\n\n\n\n\n\n\n\n\n\n\n\n//\n"],"mappings":"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","ignoreList":[]}