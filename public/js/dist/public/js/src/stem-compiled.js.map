{"version":3,"file":"stem-compiled.js","names":["Stem","location","name","index","order","scene","stemgroup","color","_classCallCheck","jsonfile","concat","datafile","steminfo","datastructure","loaded","active","visible","volume","balance","width","centroids","centroid_indexes","pitch","isLoaded","onLoaded","init","_createClass","key","value","mythis","json","Object","loadJSON","response","JSON","parse","track","allquietsamples","oReqs","XMLHttpRequest","open","filename","responseType","onload","oEvent","parseData","send","setTimeout","arrayBuffer","data","Uint16Array","head","splicelen","structure","slice","i","fs","fftsize","stft_size","binratio","multiplyer","byte_num_range","factor","maxvolume","createObjects","offsetz","offsety","spread","geometry","THREE","BoxGeometry","material","MeshBasicMaterial","transparent","opacity","rootobject","Mesh","position","set","add","triangles","Triangles","spectrum","Spectrum","SphereGeometry","otherobject","updateVisibility","updateOrder","updateColors","updateColor","hide","show","updateAnimation","frame","updateTriangles","updateSpectrum","Math","log10","scale","y","x","z","posx","pitchmin","pitchmax","thepitch","file","callback","xobj","overrideMimeType","onreadystatechange","readyState","status","responseText"],"sources":["../../../../src/stem.js"],"sourcesContent":["class Stem {\n  constructor(location, name, index, order, scene, stemgroup, color) {\n    this.location = location;\n    this.name = name;\n    this.index = index;\n    this.order = order;\n    this.scene = scene;\n    this.stemgroup = stemgroup;\n    this.color = color;\n\n    //Variables\n    //this.jsonfile = `${this.name}_analysis.json?v=${Math.round(Math.random()*1000)}`;\n    this.jsonfile = `${this.name}_analysis.json`;\n    //this.datafile = `${this.name}_analysis.data?v=${Math.round(Math.random()*1000)}`;\n    this.datafile = `${this.name}_analysis.data`;\n    this.steminfo;\n    this.datastructure;\n    this.loaded = false;\n    this.active = true;\n    this.visible = false;\n\n    //Stem data\n    this.volume;\n    this.balance;\n    this.width;\n    this.centroids;\n    this.centroid_indexes;\n    this.pitch;\n\n    //onLoaded handler\n    this.isLoaded = function() {\n      this.loaded = true;\n      if(typeof this.onLoaded === \"function\"){\n        this.onLoaded();\n      }\n    };\n\n    //Initialize\n    this.init();\n  }\n\n  init() {\n    const mythis = this;\n\n    //Load JSON\n    this.json = new Object();\n    this.loadJSON(this.location + this.jsonfile, response => {\n      mythis.json = JSON.parse(response);\n\n      //If not all quite samples, load the data file. Otherwise deactivate.\n      if(!mythis.json.track.allquietsamples){\n        const oReqs = new XMLHttpRequest();\n        //oReqs.open(\"GET\", `${mythis.location + mythis.json.track.filename}_analysis.data?v=${Math.round(Math.random()*1000)}`, true);\n        oReqs.open(\"GET\", `${mythis.location + mythis.json.track.filename}_analysis.data`, true);\n        oReqs.responseType = \"arraybuffer\";\n        oReqs.onload = function (oEvent) {\n          if(this.response){\n            mythis.parseData(this.response);\n          }\n        }\n        oReqs.send(null);\n      }else{\n        mythis.active = false;\n        setTimeout(() => {\n          mythis.isLoaded();\n        }, 1000);\n      }\n    });\n  }\n\n  parseData(arrayBuffer) {\n\n    //Extract data array\n    const data = new Uint16Array(arrayBuffer);\n    let head = 0;\n    let splicelen = 0;\n\n    //volume\n    splicelen = this.json.structure[0].volume[0];\n    this.volume = data.slice(head, head + splicelen);\n    head += splicelen;\n\n    //balance\n    splicelen = this.json.structure[1].balance[0];\n    this.balance = data.slice(head, head + splicelen);\n    head += splicelen;\n\n    //width\n    splicelen = this.json.structure[2].width[0];\n    this.width = data.slice(head, head + splicelen);\n    head += splicelen;\n\n    //stft_clusters\n    splicelen = this.json.structure[3].centroids[1];\n    this.centroids = [];\n    for(let i=0; i<this.json.structure[3].centroids[0]; i++){\n      this.centroids[i] = data.slice(head, head + splicelen);\n      head += splicelen;\n    }\n\n    //centroid_indexes\n    splicelen = this.json.structure[4].centroid_indexes[0];\n    this.centroid_indexes = data.slice(head, head + splicelen);\n    head += splicelen;\n\n    //harmonics\n    splicelen = this.json.structure[5].pitch[0];\n    this.pitch = data.slice(head, head + splicelen);\n    head += splicelen;\n\n    //Static Parameters\n    this.fs = this.json.track.fs;\n    this.fftsize = this.json.track.stft_size;\n    this.binratio = this.fs/this.fftsize;\n    this.multiplyer = this.json.track.byte_num_range; //255, 65535\n    this.factor = 100000;\n    this.maxvolume = this.json.track.maxvolume;\n\n    this.createObjects();\n\n  }\n\n  createObjects() {\n    const mythis = this;\n\n    //Create objects for each track\n    this.offsetz = -0.5;\n    this.offsety = 0;\n    this.spread = -0.1;\n\n    //Root Object\n    var geometry = new THREE.BoxGeometry(0.5, 0.5, 0.5);\n    var material = new THREE.MeshBasicMaterial( { color: 0xffffff, transparent:true, opacity:0.00 } ); //0.03\n    this.rootobject = new THREE.Mesh( geometry, material );\n    this.rootobject.visible = this.visible;\n    this.rootobject.name = 'rootobject';\n    this.rootobject.position.set(0, this.offsety, (this.spread * this.order) + this.offsetz);\n    this.stemgroup.add(this.rootobject);\n\n      //Models\n      //this.helper = new Helper(this.scene, this);\n      this.triangles = new Triangles(this.scene, this, this.color);\n      this.spectrum = new Spectrum(this.scene, this, this.color);\n\n      //Other object\n      var geometry = new THREE.SphereGeometry( 0.01, 0.01, 0.01 );\n      var material = new THREE.MeshBasicMaterial( { color: 0x000000} );\n      this.otherobject = new THREE.Mesh( geometry, material );\n      this.otherobject.visible = false;\n      this.rootobject.add( this.otherobject );\n\n    //Report done loading\n    this.isLoaded();\n  }\n\n  updateVisibility(visible){\n    this.visible = visible;\n    if(this.active){\n      this.rootobject.visible = visible;\n    }\n  }\n\n  updateOrder(order){\n    this.order = order;\n    if(this.active){\n      this.rootobject.position.set(0, this.offsety, (this.spread * this.order) + this.offsetz);\n    }\n  }\n\n  updateColors(color){\n    this.color = color;\n    if(this.active){\n      this.triangles.updateColor(color);\n      this.spectrum.updateColor(color);\n    }\n  }\n\n  hide(){\n    if(this.active){\n      this.rootobject.visible = false;\n    }\n  }\n\n  show(){\n    if(this.active){\n      this.rootobject.visible = true;\n    }\n  }\n\n  updateAnimation(frame) {\n    this.frame = frame;\n    if(this.active){\n\n      //Update models\n      this.triangles.updateTriangles();\n      this.spectrum.updateSpectrum();\n\n      //Variables\n      //const fs = this.json.track.fs;\n      //const fftsize = this.json.track.stft_size;\n      //const binratio = fs/fftsize;\n      //const multiplyer = this.json.track.byte_num_range; //255, 65535\n      //const factor = 100000;\n      //const maxvolume = this.json.track.maxvolume;\n\n      //Volume, Width\n      let volume = Math.log10(this.volume[this.frame] / this.multiplyer * this.factor * this.maxvolume) / 1;// / multiplyer;// * this.json.track.maxvolume; // * 4 + 1;\n      let width = Math.log10(this.width[this.frame] / this.multiplyer * this.factor) / 1;// * this.json.track.maxvolume; // * 10 + 3;\n      if(volume <= 0) volume = 0.0001;\n      if(width <= 0) width = 0.0001;\n      this.otherobject.scale.y = volume;\n      this.otherobject.scale.x = volume;\n      this.otherobject.scale.z = volume;\n\n      //Panning\n      const posx = (this.balance[this.frame] / this.multiplyer-0.5) * 4;\n      this.otherobject.position.x = posx;\n      this.rootobject.position.x = posx * 0.5;\n\n      //Pitch\n      const pitchmin = this.json.track.pitchmin; //50\n      const pitchmax = this.json.track.pitchmax; //2000\n      if(this.pitch[this.frame] >= 30){\n        const thepitch = Math.log10(this.pitch[this.frame] / this.multiplyer * pitchmax * this.factor/this.fs) - 1.2;\n        this.otherobject.position.y = thepitch;\n      }else{\n        this.otherobject.position.y = 0; //Math.log10(pitchmin);\n      }\n    }\n  }\n\n  loadJSON(file, callback) {\n    const xobj = new XMLHttpRequest();\n    xobj.overrideMimeType(\"application/json\");\n    xobj.open('GET', file, true);\n    xobj.onreadystatechange = () => {\n      if(xobj.readyState == 4 && xobj.status == \"200\") {callback(xobj.responseText);}\n    };\n    xobj.send(null);\n  }\n}\n"],"mappings":"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","ignoreList":[]}