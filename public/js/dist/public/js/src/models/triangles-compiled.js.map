{"version":3,"sources":["../../../../../src/models/triangles.js"],"names":["Triangles","scene","stem","color","mythis","initTriangles","CENTROID_LENGTH","centroids","length","MAX_POINTS","geometry","THREE","BufferGeometry","positions","Float32Array","normals","addAttribute","BufferAttribute","material","MeshBasicMaterial","side","DoubleSide","wireframe","triangles","Mesh","position","x","y","offsety","rootobject","add","attributes","array","positionlength","trianglecount","scale","size","z","i","Math","random","index","needsUpdate","volume","log10","frame","multiplyer","factor","maxvolume","set"],"mappings":"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","sourcesContent":["class Triangles {\n  constructor(scene, stem, color) {\n    const mythis = this;\n    this.scene = scene;\n    this.stem = stem;\n    this.color = color;\n    this.initTriangles();\n  }\n\n  initTriangles() {\n\n    //Triangles\n    const CENTROID_LENGTH = this.stem.centroids[0].length;\n    const MAX_POINTS = CENTROID_LENGTH * 2;\n    const geometry = new THREE.BufferGeometry();\n    var positions = new Float32Array(MAX_POINTS * 3);\n    const normals = new Float32Array(MAX_POINTS * 3);\n    geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3));\n    geometry.addAttribute('normal', new THREE.BufferAttribute(normals, 3));\n    const material = new THREE.MeshBasicMaterial({color: this.color, side: THREE.DoubleSide, wireframe:false});\n    this.triangles = new THREE.Mesh(geometry, material);\n    this.triangles.position.x = 0;\n    this.triangles.position.y = this.stem.offsety;\n    this.stem.rootobject.add(this.triangles);\n\n    var positions = this.triangles.geometry.attributes.position.array;\n    const positionlength = positions.length/3;\n    const trianglecount = 10;//positionlength/3;\n    const scale = 1;\n    const size = 0.5;\n    let x;\n    let y;\n    let z;\n    for(let i=0; i<trianglecount*3; i++){\n      if ( i % 3 === 0 ) {\n          x = 0;\n          y = 0;\n          z = 0;\n      } else {\n          x = x + size * ( Math.random() - 0.5 );\n          y = y + size * ( Math.random() - 0.5 );\n          z = 0;\n      }\n      const index = 3 * i;\n      positions[ index     ] = x;\n      positions[ index + 1 ] = y;\n      positions[ index + 2 ] = z;\n    }\n    this.triangles.geometry.attributes.position.needsUpdate = true;\n  }\n\n  updateTriangles() {\n    let volume = Math.log10(this.stem.volume[this.stem.frame] / this.stem.multiplyer * this.stem.factor * this.stem.maxvolume) / 1;\n    if(volume <= 0) volume = 0.0001;\n    this.triangles.scale.set(volume,volume,volume);\n  }\n\n  updateColor(color){\n    this.triangles.material.color.set(color);\n  }\n\n\n\n  //\n}\n"],"file":"triangles-compiled.js"}