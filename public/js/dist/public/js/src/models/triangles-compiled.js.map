{"version":3,"file":"triangles-compiled.js","names":["Triangles","scene","stem","color","_classCallCheck","mythis","zeroed","yoffset","initTriangles","generateTriangleGeometry","_createClass","key","value","CENTROID_LENGTH","centroids","length","MAX_POINTS","geometry","THREE","BufferGeometry","positions","Float32Array","normals","addAttribute","BufferAttribute","material","MeshBasicMaterial","side","DoubleSide","wireframe","triangles","Mesh","position","x","y","rootobject","add","trianglesmirror","rotation","Math","PI","attributes","array","positionlength","trianglecount","scale","size","z","i","random","index","needsUpdate","updateTriangles","volume","log10","frame","multiplyer","factor","maxvolume","set","updateColor"],"sources":["../../../../../src/models/triangles.js"],"sourcesContent":["class Triangles {\n  constructor(scene, stem, color) {\n    const mythis = this;\n    this.scene = scene;\n    this.stem = stem;\n    this.color = color;\n    this.zeroed = false;\n    this.yoffset = 0.15;\n    this.initTriangles();\n    this.generateTriangleGeometry();\n  }\n\n  initTriangles(){\n    const CENTROID_LENGTH = this.stem.centroids[0].length;\n    const MAX_POINTS = CENTROID_LENGTH * 2;\n    const geometry = new THREE.BufferGeometry();\n    var positions = new Float32Array(MAX_POINTS * 3);\n    const normals = new Float32Array(MAX_POINTS * 3);\n    geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3));\n    geometry.addAttribute('normal', new THREE.BufferAttribute(normals, 3));\n    const material = new THREE.MeshBasicMaterial({color: this.color, side: THREE.DoubleSide, wireframe:false});\n    this.triangles = new THREE.Mesh(geometry, material);\n    this.triangles.position.x = 0;\n    this.triangles.position.y = this.yoffset;\n    //this.triangles.position.y = this.stem.offsety;\n    this.stem.rootobject.add(this.triangles);\n\n    //Triangles Mirror\n    this.trianglesmirror = new THREE.Mesh(geometry, material);\n    this.trianglesmirror.position.x = 0;\n    this.trianglesmirror.position.y = this.yoffset;\n    this.trianglesmirror.rotation.y = Math.PI / 1;\n    this.stem.rootobject.add(this.trianglesmirror);\n  }\n\n  generateTriangleGeometry(){\n    var positions = this.triangles.geometry.attributes.position.array;\n    const positionlength = positions.length/3;\n    const trianglecount = 10;//positionlength/3;\n    const scale = 1;\n    const size = 0.5;\n    let x;\n    let y;\n    let z;\n    for(let i=0; i<trianglecount*3; i++){\n      if ( i % 3 === 0 ) {\n          x = 0;\n          y = 0;\n          z = 0;\n      } else {\n          x = x + size * ( Math.random() - 0.5 );\n          y = y + size * ( Math.random() - 0.5 );\n          z = 0;\n      }\n      const index = 3 * i;\n      positions[ index     ] = x;\n      positions[ index + 1 ] = y;\n      positions[ index + 2 ] = z;\n    }\n    this.triangles.geometry.attributes.position.needsUpdate = true;\n  }\n\n  updateTriangles() {\n    let volume = Math.log10(this.stem.volume[this.stem.frame] / this.stem.multiplyer * this.stem.factor * this.stem.maxvolume) / 1;\n    if(volume <= 0.5){\n      if(!this.zeroed){\n        this.generateTriangleGeometry();\n        this.zeroed = true;\n      }\n    }else{\n      if(this.zeroed) this.zeroed = false;\n    }\n\n    //Scale\n    if(volume <= 0) volume = 0.0001;\n    this.triangles.scale.set(volume,volume,volume);\n    this.trianglesmirror.scale.set(volume,volume,volume);\n  }\n\n  updateColor(color){\n    this.triangles.material.color.set(color);\n    this.trianglesmirror.material.color.set(color);\n  }\n\n\n\n  //\n}\n"],"mappings":"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","ignoreList":[]}