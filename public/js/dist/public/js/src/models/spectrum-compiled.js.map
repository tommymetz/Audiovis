{"version":3,"sources":["../../../../../src/models/spectrum.js"],"names":["Spectrum","scene","stem","color","mythis","initSpectrum","CENTROID_LENGTH","centroids","length","MAX_POINTS","geometry","THREE","BufferGeometry","positions","Float32Array","normals","addAttribute","BufferAttribute","material","MeshBasicMaterial","wireframe","side","DoubleSide","transparent","opacity","spectrum","Mesh","position","x","y","offsety","rootobject","add","attributes","array","positionlength","trianglecount","scale","z","index","trindex","sidecount","trindexdelta","i","Math","log10","normal","normalcount","computeVertexNormals","spectrummirror","rotation","PI","multiplyer","json","track","byte_num_range","factor","vqi","centroid_indexes","frame","volume","log","needsUpdate","set"],"mappings":"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","sourcesContent":["class Spectrum {\n  constructor(scene, stem, color) {\n    const mythis = this;\n    this.scene = scene;\n    this.stem = stem;\n    this.color = color;\n\n    this.initSpectrum();\n  }\n\n  initSpectrum() {\n    //Spectrum Shape\n    const CENTROID_LENGTH = this.stem.centroids[0].length;\n    const MAX_POINTS = CENTROID_LENGTH * 2;\n    const geometry = new THREE.BufferGeometry();\n    var positions = new Float32Array(MAX_POINTS * 3);\n    var normals = new Float32Array(MAX_POINTS * 3);\n    geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3));\n    geometry.addAttribute('normal', new THREE.BufferAttribute(normals, 3));\n    const material = new THREE.MeshBasicMaterial({color: this.color, wireframe:false, side: THREE.DoubleSide, transparent:true, opacity: 0.75}); //side: THREE.DoubleSide,\n    this.spectrum = new THREE.Mesh(geometry, material);\n    this.spectrum.position.x = 0;\n    this.spectrum.position.y = this.stem.offsety;\n    //this.spectrum.rotation.y = Math.PI / 1;\n    this.stem.rootobject.add(this.spectrum);\n\n    //Create two columns of positions\n    var positions = this.spectrum.geometry.attributes.position.array;\n    const positionlength = positions.length/3;\n    const trianglecount = positionlength/3;\n    const scale = 1;\n    let x;\n    let y;\n    let z;\n    var index = 0;\n    let side = 1;\n    let trindex = -1;\n    let sidecount = 0;\n    let trindexdelta = 0;\n    for(var i=0; i<trianglecount*3; i++){\n\n      //Set side and trindex values\n      if (i%3 === 0){\n        trindex++;\n        side = (side == 0 ? 1 : 0);\n      }\n      trindexdelta = trindex - sidecount;\n\n      //Set postions for each side\n      if(side == 0){ //SIDE A\n\n        //V1\n        if (i%3 === 0){\n          x = 0;\n          y = Math.log10(trindexdelta);\n          z = 0;\n\n        //V2\n        }else if(i%3 === 1){\n          x = 1;\n          y = Math.log10(trindexdelta);\n          z = 0;\n\n        //V3\n        }else{\n          x = 1;\n          y = Math.log10(trindexdelta+1);\n          z = 0;\n        }\n\n\n      }else{ //SIDE B\n\n        //V1\n        if (i%3 === 0){\n          x = 0;\n          y = Math.log10(trindexdelta);\n          z = 0;\n\n        //V2\n        }else if(i%3 === 1){\n          x = 0;\n          y = Math.log10(trindexdelta-0.9);\n          z = 0;\n\n        //V3\n        }else{\n          x = 0.9;\n          y = Math.log10(trindexdelta);\n          z = 0;\n          sidecount++;\n        }\n\n      }\n\n      //Range\n      if(x<=0){x=0;};\n      if(y<=0){y=0;};\n      if(z<=0){z=0;};\n\n      //Set position\n      var index = 3 * i;\n      positions[ index     ] = x;\n      positions[ index + 1 ] = y;\n      positions[ index + 2 ] = z;\n    }\n\n    //Normals\n    var normals = this.spectrum.geometry.attributes.normal.array\n    const normalcount = normals.length;\n    for(var i=0; i<normalcount; i++){\n      normals[i] = -1;\n    }\n    this.spectrum.geometry.computeVertexNormals();\n    //var helper = new THREE.VertexNormalsHelper( this.spectrum, 0.2, 0x00ff00, 1 );\n    //this.stem.rootobject.add(helper);\n\n\n    //Spectrum Shape Mirror\n    this.spectrummirror = new THREE.Mesh(geometry, material);\n    this.spectrummirror.position.x = 0;\n    this.spectrummirror.position.y = this.stem.offsety;\n    this.spectrummirror.rotation.y = Math.PI / 1;\n    this.stem.rootobject.add(this.spectrummirror);\n  }\n\n  updateSpectrum() {\n    const multiplyer = this.stem.json.track.byte_num_range; //255, 65535\n    const factor = 100000;\n    const vqi = this.stem.centroid_indexes[this.stem.frame];\n\n    //Create two columns of positions\n    const positions = this.spectrum.geometry.attributes.position.array;\n    const positionlength = positions.length/3;\n    const trianglecount = positionlength/3;\n    const scale = 1;\n    let x;\n    let y;\n    let z;\n    let volume;\n    var index = 0;\n    let side = 1;\n    let trindex = -1;\n    let sidecount = 0;\n    let trindexdelta = 0;\n    for(let i=0; i<trianglecount*3; i++){\n\n      //Set side and trindex values\n      if (i%3 === 0){\n        trindex++;\n        side = (side == 0 ? 1 : 0);\n      }\n      trindexdelta = trindex - sidecount;\n\n      //Set postions for each side\n      if(side == 0){ //SIDE A\n\n        //V1\n        if (i%3 === 0){\n          x = 0;\n          y = Math.log10(trindexdelta);\n          z = 0;\n\n        //V2\n        }else if(i%3 === 1){\n          volume = Math.log10(this.stem.volume[this.stem.frame] / multiplyer * factor) / 10;\n          x = Math.log(this.stem.centroids[vqi][trindexdelta] / multiplyer * factor) / 2 * volume;\n          y = Math.log10(trindexdelta);\n          z = 0;\n\n        //V3\n        }else{\n          volume = Math.log10(this.stem.volume[this.stem.frame] / multiplyer * factor) / 10;\n          x = Math.log(this.stem.centroids[vqi][trindexdelta+1] / multiplyer * factor) / 2 * volume;\n          y = Math.log10(trindexdelta+1);\n          z = 0;\n        }\n\n\n      }else{ //SIDE B\n\n        //V1\n        if (i%3 === 0){\n          x = 0;\n          y = Math.log10(trindexdelta);\n          z = 0;\n\n        //V2\n        }else if(i%3 === 1){\n          x = 0;\n          y = Math.log10(trindexdelta-1); //0.9\n          z = 0;\n\n        //V3\n        }else{\n          volume = Math.log10(this.stem.volume[this.stem.frame] / multiplyer * factor) / 10;\n          x = Math.log(this.stem.centroids[vqi][trindexdelta] / multiplyer * factor) / 2 * volume * 1; //0.9\n          y = Math.log10(trindexdelta);\n          z = 0;\n          sidecount++;\n        }\n\n      }\n\n      //Range\n      if(x<=0){x=0;};\n      if(y<=0){y=0;};\n      if(z<=0){z=0;};\n\n      //Set position\n      var index = 3 * i;\n      positions[ index     ] = x;\n      positions[ index + 1 ] = y;\n      positions[ index + 2 ] = z;\n    }\n    this.spectrum.geometry.attributes.position.needsUpdate = true;\n\n    //Mirror\n    //this.spectrummirror.geometry.attributes.position.array = positions;\n    //this.spectrummirror.geometry.attributes.position.needsUpdate = true;\n  }\n\n  updateColor(color){\n    this.spectrum.material.color.set(color);\n    this.spectrummirror.material.color.set(color);\n  }\n\n\n\n  //\n}\n"],"file":"spectrum-compiled.js"}