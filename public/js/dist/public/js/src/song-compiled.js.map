{"version":3,"sources":["../../../../src/song.js"],"names":["Song","parent","location","songjsonfile","attributesjson","scene","audiolistener","fps","hide_controls","mythis","active","audiotrack","THREE","Audio","add","mp3file","firststarttime","ignoreending","stemnames","stems","loadingstage","order","colors","loaded","visible","gui","SongGui","stemgroup","Group","position","set","frame","offset","starttime","isLoaded","onLoaded","init","loadJSON","response","json","JSON","parse","audiofiles","attributes","length","colorindex","colorset","eval","forEach","element","index","push","loader","AudioLoader","load","audioBuffer","setBuffer","setLoop","setVolume","onEnded","console","log","updateVisibility","nextsong","i","createStem","name","thestem","Stem","j","updateOrder","which","color","updateColors","checked","hide","show","offsetframes","isPlaying","stop","play","startTime","time","context","currentTime","buffer","duration","setTimeout","audioframe","Math","round","updateAnimation","file","callback","xobj","XMLHttpRequest","overrideMimeType","open","onreadystatechange","readyState","status","responseText","send"],"mappings":"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","sourcesContent":["class Song {\n  constructor(parent, location, songjsonfile, attributesjson, scene, audiolistener, fps, hide_controls=false) {\n    const mythis = this;\n    this.parent = parent;\n    this.location = location;\n    this.songjsonfile = songjsonfile;\n    this.attributesjson = attributesjson;\n    this.scene = scene;\n    this.audiolistener = audiolistener;\n    this.fps = fps;\n    this.hide_controls = hide_controls;\n\n    //Variables\n    this.active = false;\n    this.audiotrack = new THREE.Audio(this.audiolistener);\n    this.scene.add(this.audiotrack);\n    this.mp3file;\n    this.firststarttime = 0;\n    this.ignoreending = false;\n    this.stemnames = [];\n    this.stems = [];\n    this.loadingstage = 0;\n    this.order = [];\n    this.colors = [];\n    this.loaded = false;\n    this.visible = false;\n\n    this.gui = new SongGui(this);\n\n    this.stemgroup = new THREE.Group();\n    this.stemgroup.position.set(0,0,1.2);\n    this.scene.add(this.stemgroup);\n\n    this.frame = 0;\n    this.offset = 0;\n    this.starttime = 0;\n\n    //onLoaded handler\n    this.isLoaded = function() {\n      if(typeof this.onLoaded === \"function\"){\n        this.loaded = true;\n        this.gui.init();\n        this.onLoaded();\n      }\n    };\n\n    //Load JSON\n    //mythis.loadJSON(`${mythis.location + mythis.songjsonfile}?v=${Math.round(Math.random()*1000)}`, response => {\n    mythis.loadJSON(`${mythis.location + mythis.songjsonfile}`, response => {\n      const json = JSON.parse(response);\n      mythis.mp3file = json[0].mp3file;\n      mythis.stemnames = json[0].audiofiles;\n\n      //Load attributes\n      //mythis.loadJSON(`${mythis.location + mythis.attributesjson}?v=${Math.round(Math.random()*1000)}`, response => {\n      mythis.loadJSON(`${mythis.location + mythis.attributesjson}`, response => {\n        const json = JSON.parse(response);\n        mythis.attributes = json;\n\n        //Colors\n        if(mythis.attributes.colors.length == 0){\n\n          //Populate with colorset\n          let colorindex = 0;\n          let colorset = eval(mythis.attributes.colorset);\n          mythis.stemnames.forEach(function(element, index){\n            mythis.colors.push(colorset[colorindex]);\n            colorindex++;\n            if(index == colorset.length-1) colorindex = 0;\n          });\n        }else{\n          mythis.colors = mythis.attributes.colors;\n        }\n\n        //Order\n        if(mythis.attributes.order.length == 0){\n          mythis.stemnames.forEach(function(element, index){\n            mythis.order.push(index);\n          });\n        }else{\n          mythis.order = mythis.attributes.order;\n        }\n\n        //Load mp3file\n        const loader = new THREE.AudioLoader();\n        loader.load(mythis.location + mythis.mp3file, audioBuffer => {\n          mythis.audiotrack.setBuffer( audioBuffer );\n          mythis.audiotrack.setLoop(false);\n          mythis.audiotrack.setVolume(1.0);\n          mythis.audiotrack.onEnded = function(){\n            if(!mythis.ignoreending){\n              console.log('ended');\n              if(mythis.visible){\n                mythis.updateVisibility(false);\n                mythis.parent.nextsong();\n              }\n            }\n          };\n\n          //Create stems\n          for(let i=0; i<mythis.stemnames.length; i++){\n            mythis.stems[i] = mythis.createStem(mythis.stemnames[i], i, mythis.order[i]);\n          }\n        });\n      });\n    });\n  }\n\n  createStem(name, i, order) {\n    const mythis = this;\n\n    //Create the stem\n    const thestem = new Stem(this.location, name, i, order, this.scene, this.stemgroup, this.colors[i]);\n    thestem.onLoaded = () => {\n\n      //If all stems are loaded\n      let loaded = true;\n      for(let j=0; j<mythis.stemnames.length; j++){\n        if(!mythis.stems[j].loaded){\n          loaded = false;\n        }\n      }\n      if(loaded){\n        mythis.isLoaded();\n      }\n    }\n    return thestem;\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  //VISUALS/////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n  updateVisibility(visible){\n    this.visible = visible;\n    if(this.hide_controls){\n      this.gui.updateVisibility(false);\n    }else{\n      this.gui.updateVisibility(visible);\n    }\n    for(let i=0; i<this.stemnames.length; i++){\n      this.stems[i].updateVisibility(visible);\n    }\n  }\n\n  updateStemOrder(order){\n    for(let i=0; i<this.stemnames.length; i++){\n      this.stems[i].updateOrder(order[i]);\n    }\n  }\n\n  updateStemColor(which, color){\n    this.stems[which].updateColors(color);\n  }\n\n  updateSoloing(which, checked){\n    if(checked){\n      this.stems.forEach(function(element, index){\n        if(which != index) element.hide();\n      });\n    }else{\n      this.stems.forEach(function(element, index){\n        element.show();\n      });\n    }\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  //PLAYBACK////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n  play(offset = 0) {\n    var mythis = this;\n    this.offset = offset;\n    this.offsetframes = this.offset * this.fps;\n\n    //Playback\n    if(this.audiotrack.isPlaying) this.audiotrack.stop();\n    this.audiotrack.offset = this.offset;\n    this.audiotrack.play();\n    this.starttime = this.audiotrack.startTime;\n    this.updateVisibility(true);\n  }\n\n  stop(){\n    this.updateVisibility(false);\n    if(this.audiotrack.isPlaying) this.audiotrack.stop();\n  }\n\n  fastforward(){\n    var mythis = this;\n    this.ignoreending = true;\n    var time = this.audiotrack.context.currentTime + this.audiotrack.offset + 5;\n    if(time < this.audiotrack.buffer.duration){\n      this.play(time);\n      setTimeout(function(){ mythis.ignoreending = false; }, 10); //Revert after ending fired\n    }else{\n      this.updateVisibility(false);\n      this.parent.nextsong();\n    }\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  //ANIMATE/////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n  updateAnimation() {\n    if(this.visible){\n      var audioframe = (this.audiotrack.context.currentTime - this.starttime) * this.fps;\n      this.frame = Math.round(audioframe + this.offsetframes); //1000ms / 24fps = 41.666666666\n      for(let i=0; i<this.stems.length; i++){\n        this.stems[i].updateAnimation(this.frame);\n      }\n    }\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  //UTIL////////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n  loadJSON(file, callback) {\n    const xobj = new XMLHttpRequest();\n    xobj.overrideMimeType(\"application/json\");\n    xobj.open('GET', file, true);\n    xobj.onreadystatechange = () => {\n      if(xobj.readyState == 4 && xobj.status == \"200\") {callback(xobj.responseText);}\n    };\n    xobj.send(null);\n  }\n\n\n\n\n  //var audioframe = Math.round((this.audiotrack.context.currentTime - this.audiotrack.startTime) * this.fps) - this.startframe + this.offsetframes; //1000ms / 24fps = 41.666666666\n\n\n\n\n\n\n\n\n\n  /*\n\n\n\n  //Load master json file\n  /*var loader = new THREE.FileLoader(this.loadingmanager);\n  loader.load(this.songjsonfile + \"?v=\" + Math.round(Math.random()*1000), function(data){\n    mythis.stems = JSON.parse(data)[0].audiofiles;\n  });\n  */\n\n\n\n\n  //\n}\n"],"file":"song-compiled.js"}